define("taoQtiPrint/lib/qrcode",[],function(){var _Mathfloor=Math.floor;function QR8bitByte(data){this.mode=QRMode.MODE_8BIT_BYTE,this.data=data,this.parsedData=[];for(var i=0,l=this.data.length;i<l;i++){var byteArray=[],code=this.data.charCodeAt(i);65536<code?(byteArray[0]=240|(1835008&code)>>>18,byteArray[1]=128|(258048&code)>>>12,byteArray[2]=128|(4032&code)>>>6,byteArray[3]=128|63&code):2048<code?(byteArray[0]=224|(61440&code)>>>12,byteArray[1]=128|(4032&code)>>>6,byteArray[2]=128|63&code):128<code?(byteArray[0]=192|(1984&code)>>>6,byteArray[1]=128|63&code):byteArray[0]=code,this.parsedData.push(byteArray)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function QRCodeModel(typeNumber,errorCorrectLevel){this.typeNumber=typeNumber,this.errorCorrectLevel=errorCorrectLevel,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function QRPolynomial(num,shift){if(null==num.length)throw new Error(num.length+"/"+shift);for(var offset=0;offset<num.length&&0==num[offset];)offset++;this.num=Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++)this.num[i]=num[i+offset]}function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount,this.dataCount=dataCount}function QRBitBuffer(){this.buffer=[],this.length=0}function _isSupportCanvas(){return"undefined"!=typeof CanvasRenderingContext2D}function _getAndroid(){var android=!1,sAgent=navigator.userAgent;if(/android/i.test(sAgent)){android=!0;var aMat=sAgent.toString().match(/android ([0-9]\.[0-9])/i);aMat&&aMat[1]&&(android=parseFloat(aMat[1]))}return android}function _getTypeNumber(sText,nCorrectLevel){for(var nLimit,nType=1,length=_getUTF8Length(sText),i=0,len=QRCodeLimitLength.length;i<=len&&(nLimit=0,nCorrectLevel===QRErrorCorrectLevel.L?nLimit=QRCodeLimitLength[i][0]:nCorrectLevel===QRErrorCorrectLevel.M?nLimit=QRCodeLimitLength[i][1]:nCorrectLevel===QRErrorCorrectLevel.Q?nLimit=QRCodeLimitLength[i][2]:nCorrectLevel===QRErrorCorrectLevel.H?nLimit=QRCodeLimitLength[i][3]:void 0,!(length<=nLimit));i++)nType++;if(nType>QRCodeLimitLength.length)throw new Error("Too long data");return nType}function _getUTF8Length(sText){var replacedText=encodeURI(sText).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return replacedText.length+(replacedText.length==sText?0:3)}var QRCode;QR8bitByte.prototype={getLength:function(buffer){return this.parsedData.length},write:function(buffer){for(var i=0,l=this.parsedData.length;i<l;i++)buffer.put(this.parsedData[i],8)}},QRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData),this.dataCache=null},isDark:function(row,col){if(0>row||this.moduleCount<=row||0>col||this.moduleCount<=col)throw new Error(row+","+col);return this.modules[row][col]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(test,maskPattern){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++)this.modules[row][col]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(test,maskPattern),7<=this.typeNumber&&this.setupTypeNumber(test),null==this.dataCache&&(this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,maskPattern)},setupPositionProbePattern:function(row,col){for(var r=-1;7>=r;r++)if(!(-1>=row+r||this.moduleCount<=row+r))for(var c=-1;7>=c;c++)-1>=col+c||this.moduleCount<=col+c||(this.modules[row+r][col+c]=!!(0<=r&&6>=r&&(0==c||6==c)||0<=c&&6>=c&&(0==r||6==r)||2<=r&&4>=r&&2<=c&&4>=c))},getBestMaskPattern:function(){for(var minLostPoint=0,pattern=0,i=0;8>i;i++){this.makeImpl(!0,i);var lostPoint=QRUtil.getLostPoint(this);(0==i||minLostPoint>lostPoint)&&(minLostPoint=lostPoint,pattern=i)}return pattern},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth),cs=1;this.make();for(var y,row=0;row<this.modules.length;row++){y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs,dark=this.modules[row][col];dark&&(qr_mc.beginFill(0,100),qr_mc.moveTo(x,y),qr_mc.lineTo(x+cs,y),qr_mc.lineTo(x+cs,y+cs),qr_mc.lineTo(x,y+cs),qr_mc.endFill())}}return qr_mc},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++)null==this.modules[r][6]&&(this.modules[r][6]=0==r%2);for(var c=8;c<this.moduleCount-8;c++)null==this.modules[6][c]&&(this.modules[6][c]=0==c%2)},setupPositionAdjustPattern:function(){for(var pos=QRUtil.getPatternPosition(this.typeNumber),i=0;i<pos.length;i++)for(var j=0;j<pos.length;j++){var row=pos[i],col=pos[j];if(null==this.modules[row][col])for(var r=-2;2>=r;r++)for(var c=-2;2>=c;c++)this.modules[row+r][col+c]=-2==r||2==r||-2==c||2==c||0==r&&0==c}},setupTypeNumber:function(test){for(var mod,bits=QRUtil.getBCHTypeNumber(this.typeNumber),i=0;18>i;i++)mod=!test&&1==(1&bits>>i),this.modules[_Mathfloor(i/3)][i%3+this.moduleCount-8-3]=mod;for(var mod,i=0;18>i;i++)mod=!test&&1==(1&bits>>i),this.modules[i%3+this.moduleCount-8-3][_Mathfloor(i/3)]=mod},setupTypeInfo:function(test,maskPattern){for(var mod,data=this.errorCorrectLevel<<3|maskPattern,bits=QRUtil.getBCHTypeInfo(data),i=0;15>i;i++)mod=!test&&1==(1&bits>>i),6>i?this.modules[i][8]=mod:8>i?this.modules[i+1][8]=mod:this.modules[this.moduleCount-15+i][8]=mod;for(var mod,i=0;15>i;i++)mod=!test&&1==(1&bits>>i),8>i?this.modules[8][this.moduleCount-i-1]=mod:9>i?this.modules[8][15-i-1+1]=mod:this.modules[8][15-i-1]=mod;this.modules[this.moduleCount-8][8]=!test},mapData:function(data,maskPattern){for(var inc=-1,row=this.moduleCount-1,bitIndex=7,byteIndex=0,col=this.moduleCount-1;0<col;col-=2)for(6==col&&col--;!0;){for(var c=0;2>c;c++)if(null==this.modules[row][col-c]){var dark=!1;byteIndex<data.length&&(dark=1==(1&data[byteIndex]>>>bitIndex));var mask=QRUtil.getMask(maskPattern,row,col-c);mask&&(dark=!dark),this.modules[row][col-c]=dark,bitIndex--,-1==bitIndex&&(byteIndex++,bitIndex=7)}if(row+=inc,0>row||this.moduleCount<=row){row-=inc,inc=-inc;break}}}},QRCodeModel.PAD0=236,QRCodeModel.PAD1=17,QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){for(var data,rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel),buffer=new QRBitBuffer,i=0;i<dataList.length;i++)data=dataList[i],buffer.put(data.mode,4),buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber)),data.write(buffer);for(var totalDataCount=0,i=0;i<rsBlocks.length;i++)totalDataCount+=rsBlocks[i].dataCount;if(buffer.getLengthInBits()>8*totalDataCount)throw new Error("code length overflow. ("+buffer.getLengthInBits()+">"+8*totalDataCount+")");for(buffer.getLengthInBits()+4<=8*totalDataCount&&buffer.put(0,4);0!=buffer.getLengthInBits()%8;)buffer.putBit(!1);for(;!(buffer.getLengthInBits()>=8*totalDataCount)&&(buffer.put(QRCodeModel.PAD0,8),!(buffer.getLengthInBits()>=8*totalDataCount));)buffer.put(QRCodeModel.PAD1,8);return QRCodeModel.createBytes(buffer,rsBlocks)},QRCodeModel.createBytes=function(buffer,rsBlocks){for(var _Mathmax=Math.max,offset=0,maxDcCount=0,maxEcCount=0,dcdata=Array(rsBlocks.length),ecdata=Array(rsBlocks.length),r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount,ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=_Mathmax(maxDcCount,dcCount),maxEcCount=_Mathmax(maxEcCount,ecCount),dcdata[r]=Array(dcCount);for(var i=0;i<dcdata[r].length;i++)dcdata[r][i]=255&buffer.buffer[i+offset];offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount),rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1),modPoly=rawPoly.mod(rsPoly);ecdata[r]=Array(rsPoly.getLength()-1);for(var modIndex,i=0;i<ecdata[r].length;i++)modIndex=i+modPoly.getLength()-ecdata[r].length,ecdata[r][i]=0<=modIndex?modPoly.get(modIndex):0}for(var totalCodeCount=0,i=0;i<rsBlocks.length;i++)totalCodeCount+=rsBlocks[i].totalCount;for(var data=Array(totalCodeCount),index=0,i=0;i<maxDcCount;i++)for(var r=0;r<rsBlocks.length;r++)i<dcdata[r].length&&(data[index++]=dcdata[r][i]);for(var i=0;i<maxEcCount;i++)for(var r=0;r<rsBlocks.length;r++)i<ecdata[r].length&&(data[index++]=ecdata[r][i]);return data};for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(data){for(var d=data<<10;0<=QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15);)d^=QRUtil.G15<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15);return(data<<10|d)^QRUtil.G15_MASK},getBCHTypeNumber:function(data){for(var d=data<<12;0<=QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18);)d^=QRUtil.G18<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18);return data<<12|d},getBCHDigit:function(data){for(var digit=0;0!=data;)digit++,data>>>=1;return digit},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1]},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return 0==(i+j)%2;case QRMaskPattern.PATTERN001:return 0==i%2;case QRMaskPattern.PATTERN010:return 0==j%3;case QRMaskPattern.PATTERN011:return 0==(i+j)%3;case QRMaskPattern.PATTERN100:return 0==(_Mathfloor(i/2)+_Mathfloor(j/3))%2;case QRMaskPattern.PATTERN101:return 0==i*j%2+i*j%3;case QRMaskPattern.PATTERN110:return 0==(i*j%2+i*j%3)%2;case QRMaskPattern.PATTERN111:return 0==(i*j%3+(i+j)%2)%2;default:throw new Error("bad maskPattern:"+maskPattern);}},getErrorCorrectPolynomial:function(errorCorrectLength){for(var a=new QRPolynomial([1],0),i=0;i<errorCorrectLength;i++)a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));return a},getLengthInBits:function(mode,type){if(1<=type&&10>type)switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+mode);}else if(27>type)switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+mode);}else if(41>type)switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+mode);}else throw new Error("type:"+type)},getLostPoint:function(qrCode){for(var _Mathabs=Math.abs,moduleCount=qrCode.getModuleCount(),lostPoint=0,row=0;row<moduleCount;row++)for(var col=0;col<moduleCount;col++){for(var sameCount=0,dark=qrCode.isDark(row,col),r=-1;1>=r;r++)if(!(0>row+r||moduleCount<=row+r))for(var c=-1;1>=c;c++)0>col+c||moduleCount<=col+c||(0!=r||0!=c)&&dark==qrCode.isDark(row+r,col+c)&&sameCount++;5<sameCount&&(lostPoint+=3+sameCount-5)}for(var row=0;row<moduleCount-1;row++)for(var count,col=0;col<moduleCount-1;col++)count=0,qrCode.isDark(row,col)&&count++,qrCode.isDark(row+1,col)&&count++,qrCode.isDark(row,col+1)&&count++,qrCode.isDark(row+1,col+1)&&count++,(0==count||4==count)&&(lostPoint+=3);for(var row=0;row<moduleCount;row++)for(var col=0;col<moduleCount-6;col++)qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)&&(lostPoint+=40);for(var col=0;col<moduleCount;col++)for(var row=0;row<moduleCount-6;row++)qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)&&(lostPoint+=40);for(var darkCount=0,col=0;col<moduleCount;col++)for(var row=0;row<moduleCount;row++)qrCode.isDark(row,col)&&darkCount++;var ratio=_Mathabs(100*darkCount/moduleCount/moduleCount-50)/5;return lostPoint+=10*ratio,lostPoint}},QRMath={glog:function(n){if(1>n)throw new Error("glog("+n+")");return QRMath.LOG_TABLE[n]},gexp:function(n){for(;0>n;)n+=255;for(;256<=n;)n-=255;return QRMath.EXP_TABLE[n]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},i=0;8>i;i++)QRMath.EXP_TABLE[i]=1<<i;for(var i=8;256>i;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(var i=0;255>i;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;QRPolynomial.prototype={get:function(index){return this.num[index]},getLength:function(){return this.num.length},multiply:function(e){for(var num=Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var j=0;j<e.getLength();j++)num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));return new QRPolynomial(num,0)},mod:function(e){if(0>this.getLength()-e.getLength())return this;for(var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0)),num=Array(this.getLength()),i=0;i<this.getLength();i++)num[i]=this.get(i);for(var i=0;i<e.getLength();i++)num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);return new QRPolynomial(num,0).mod(e)}},QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(null==rsBlock)throw new Error("bad rs block @ typeNumber:"+typeNumber+"/errorCorrectLevel:"+errorCorrectLevel);for(var length=rsBlock.length/3,list=[],i=0;i<length;i++)for(var count=rsBlock[3*i+0],totalCount=rsBlock[3*i+1],dataCount=rsBlock[3*i+2],j=0;j<count;j++)list.push(new QRRSBlock(totalCount,dataCount));return list},QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){return errorCorrectLevel===QRErrorCorrectLevel.L?QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+0]:errorCorrectLevel===QRErrorCorrectLevel.M?QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+1]:errorCorrectLevel===QRErrorCorrectLevel.Q?QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+2]:errorCorrectLevel===QRErrorCorrectLevel.H?QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+3]:void 0},QRBitBuffer.prototype={get:function(index){var bufIndex=_Mathfloor(index/8);return 1==(1&this.buffer[bufIndex]>>>7-index%8)},put:function(num,length){for(var i=0;i<length;i++)this.putBit(1==(1&num>>>length-i-1))},getLengthInBits:function(){return this.length},putBit:function(bit){var bufIndex=_Mathfloor(this.length/8);this.buffer.length<=bufIndex&&this.buffer.push(0),bit&&(this.buffer[bufIndex]|=128>>>this.length%8),this.length++}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],svgDrawer=function(){var Drawing=function(el,htOption){this._el=el,this._htOption=htOption};return Drawing.prototype.draw=function(oQRCode){function makeSVG(tag,attrs){var el=document.createElementNS("http://www.w3.org/2000/svg",tag);for(var k in attrs)attrs.hasOwnProperty(k)&&el.setAttribute(k,attrs[k]);return el}var _htOption=this._htOption,_el=this._el,nCount=oQRCode.getModuleCount(),nWidth=_Mathfloor(_htOption.width/nCount),nHeight=_Mathfloor(_htOption.height/nCount);this.clear();var svg=makeSVG("svg",{viewBox:"0 0 "+(nCount+" ")+(nCount+""),width:"100%",height:"100%",fill:_htOption.colorLight});svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),_el.appendChild(svg),svg.appendChild(makeSVG("rect",{fill:_htOption.colorLight,width:"100%",height:"100%"})),svg.appendChild(makeSVG("rect",{fill:_htOption.colorDark,width:"1",height:"1",id:"template"}));for(var row=0;row<nCount;row++)for(var col=0;col<nCount;col++)if(oQRCode.isDark(row,col)){var child=makeSVG("use",{x:row+"",y:col+""});child.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),svg.appendChild(child)}},Drawing.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},Drawing}(),useSVG="svg"===document.documentElement.tagName.toLowerCase(),Drawing=useSVG?svgDrawer:_isSupportCanvas()?function(){function _onMakeImage(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function _safeSetDataURI(fSuccess,fFail){var self=this;if(self._fFail=fFail,self._fSuccess=fSuccess,null===self._bSupportDataURI){var el=document.createElement("img"),fOnError=function(){self._bSupportDataURI=!1,self._fFail&&self._fFail.call(self)},fOnSuccess=function(){self._bSupportDataURI=!0,self._fSuccess&&self._fSuccess.call(self)};return el.onabort=fOnError,el.onerror=fOnError,el.onload=fOnSuccess,void(el.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===self._bSupportDataURI&&self._fSuccess?self._fSuccess.call(self):!1===self._bSupportDataURI&&self._fFail&&self._fFail.call(self)}if(this._android&&2.1>=this._android){var factor=1/window.devicePixelRatio,drawImage=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(image,sx,sy,sw,sh,dx,dy,dw,dh){if("nodeName"in image&&/img/i.test(image.nodeName))for(var i=arguments.length-1;1<=i;i--)arguments[i]*=factor;else"undefined"==typeof dw&&(arguments[1]*=factor,arguments[2]*=factor,arguments[3]*=factor,arguments[4]*=factor);drawImage.apply(this,arguments)}};var Drawing=function(el,htOption){this._bIsPainted=!1,this._android=_getAndroid(),this._htOption=htOption,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=htOption.width,this._elCanvas.height=htOption.height,el.appendChild(this._elCanvas),this._el=el,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return Drawing.prototype.draw=function(oQRCode){var _Mathceil=Math.ceil,_Mathround=Math.round,_elImage=this._elImage,_oContext=this._oContext,_htOption=this._htOption,nCount=oQRCode.getModuleCount(),nWidth=_htOption.width/nCount,nHeight=_htOption.height/nCount,nRoundedWidth=_Mathround(nWidth),nRoundedHeight=_Mathround(nHeight);_elImage.style.display="none",this.clear();for(var row=0;row<nCount;row++)for(var col=0;col<nCount;col++){var bIsDark=oQRCode.isDark(row,col),nLeft=col*nWidth,nTop=row*nHeight;_oContext.strokeStyle=bIsDark?_htOption.colorDark:_htOption.colorLight,_oContext.lineWidth=1,_oContext.fillStyle=bIsDark?_htOption.colorDark:_htOption.colorLight,_oContext.fillRect(nLeft,nTop,nWidth,nHeight),_oContext.strokeRect(_Mathfloor(nLeft)+.5,_Mathfloor(nTop)+.5,nRoundedWidth,nRoundedHeight),_oContext.strokeRect(_Mathceil(nLeft)-.5,_Mathceil(nTop)-.5,nRoundedWidth,nRoundedHeight)}this._bIsPainted=!0},Drawing.prototype.makeImage=function(){this._bIsPainted&&_safeSetDataURI.call(this,_onMakeImage)},Drawing.prototype.isPainted=function(){return this._bIsPainted},Drawing.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},Drawing.prototype.round=function(nNumber){return nNumber?_Mathfloor(1e3*nNumber)/1e3:nNumber},Drawing}():function(){var Drawing=function(el,htOption){this._el=el,this._htOption=htOption};return Drawing.prototype.draw=function(oQRCode){for(var _htOption=this._htOption,_el=this._el,nCount=oQRCode.getModuleCount(),nWidth=_Mathfloor(_htOption.width/nCount),nHeight=_Mathfloor(_htOption.height/nCount),aHTML=["<table style=\"border:0;border-collapse:collapse;\">"],row=0;row<nCount;row++){aHTML.push("<tr>");for(var col=0;col<nCount;col++)aHTML.push("<td style=\"border:0;border-collapse:collapse;padding:0;margin:0;width:"+nWidth+"px;height:"+nHeight+"px;background-color:"+(oQRCode.isDark(row,col)?_htOption.colorDark:_htOption.colorLight)+";\"></td>");aHTML.push("</tr>")}aHTML.push("</table>"),_el.innerHTML=aHTML.join("");var elTable=_el.childNodes[0],nLeftMarginTable=(_htOption.width-elTable.offsetWidth)/2,nTopMarginTable=(_htOption.height-elTable.offsetHeight)/2;0<nLeftMarginTable&&0<nTopMarginTable&&(elTable.style.margin=nTopMarginTable+"px "+nLeftMarginTable+"px")},Drawing.prototype.clear=function(){this._el.innerHTML=""},Drawing}();return QRCode=function(el,vOption){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRErrorCorrectLevel.H},"string"==typeof vOption&&(vOption={text:vOption}),vOption)for(var i in vOption)this._htOption[i]=vOption[i];"string"==typeof el&&(el=document.getElementById(el)),this._htOption.useSVG&&(Drawing=svgDrawer),this._android=_getAndroid(),this._el=el,this._oQRCode=null,this._oDrawing=new Drawing(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},QRCode.prototype.makeCode=function(sText){this._oQRCode=new QRCodeModel(_getTypeNumber(sText,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(sText),this._oQRCode.make(),this._el.title=sText,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||3<=this._android)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=QRErrorCorrectLevel,QRCode}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/notSupported",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+="\n    <div class=\"additional\">\n        <div class=\"title\">Additional information:</div>\n        <p class=\"info\">",(helper=helpers.additional)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.additional,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</p>\n    </div>\n",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<div class=\"qti-interaction render-error feedback-error\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" >\n    <span class=\"icon-error\"></span>\n    <p class=\"message\">",(helper=helpers.message)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.message,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</p>\n",stack1=helpers["if"].call(depth0,depth0&&depth0.additional,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</div>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/helpers/container",["jquery","taoQtiItem/qtiItem/core/Element"],function($,Element){"use strict";return function getContainer(element,$scope){var serial=element.getSerial(),selector="[data-serial="+serial+"]";return Element.isA(element,"choice")?selector=".qti-choice"+selector:Element.isA(element,"interaction")&&(selector=".qti-interaction"+selector),$scope&&$scope.length?$(selector,$scope):$(selector)}}),define("taoQtiPrint/qtiPrintRenderer/renderers/interactions/NotSupported",["lodash","i18n","tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/notSupported","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(_,__,tpl,getContainer){"use strict";function interactionNotSupported(qtiClass){return{qtiClass:qtiClass,template:tpl,getContainer:getContainer,resetResponse:_.noop,setResponse:_.noop,getData:function getData(interaction,data){return _.merge(data||{},{message:__("The interaction \"%s\" is not supported for printing purpose!",qtiClass)})}}}return interactionNotSupported}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/rawResponse",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+="\n        <div class=\"additional\">\n            <div class=\"title\">Additional information:</div>\n            <p class=\"info\">",(helper=helpers.additional)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.additional,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</p>\n        </div>\n        ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<div class=\"qti-interaction qti-blockInteraction\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" >\n    <h6>",(helper=helpers.qtiClass)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.qtiClass,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h6>\n    <div class=\"render-error feedback-info\">\n        <span class=\"icon-error\"></span>\n        <p class=\"message\">",(helper=helpers.message)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.message,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</p>\n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.additional,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    </div>\n    <div class=\"responses\"></div>\n</div>",buffer})}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/responsesList",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+="\n    <dt>",(helper=helpers.name)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.name,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</dt>\n    <dd>",(helper=helpers.value)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.value,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</dd>\n",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<dl>\n",stack1=helpers.each.call(depth0,depth0&&depth0.responses,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</dl>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/interactions/RawResponse",["jquery","lodash","i18n","tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/rawResponse","tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/responsesList","taoQtiPrint/qtiPrintRenderer/helpers/container","taoQtiItem/qtiCommonRenderer/helpers/PciResponse"],function($,_,__,tpl,responsesTpl,getContainer,pciResponse){"use strict";function interactionRawResponse(qtiClass){return{qtiClass:qtiClass,template:tpl,getContainer:getContainer,getData:function getData(interaction,data){return _.merge(data||{},{qtiClass:qtiClass,message:__("The interaction \"%s\" is not fully supported for printing purpose, only the raw responses will be rendered",qtiClass)})},setResponse:function setResponse(interaction,response){var responseValue,$container=interaction.getContainer(),$responses=$(".responses",$container).empty();try{responseValue=pciResponse.unserialize(response,interaction)}catch(e){}responseValue&&responseValue.length&&$responses.html(responsesTpl({responses:[{name:interaction.attributes.responseIdentifier,value:responseValue.join(", ")}]}))},setState:function setState(interaction,state){_.isObject(state)&&state.response&&(interaction.resetResponse(),interaction.setResponse(state.response))}}}return interactionRawResponse}),define("taoQtiPrint/qtiCommonRenderer/renderers/config",["taoQtiItem/qtiCommonRenderer/renderers/config","taoQtiPrint/qtiPrintRenderer/renderers/interactions/NotSupported","taoQtiPrint/qtiPrintRenderer/renderers/interactions/RawResponse"],function(defaultConfig,NotSupported,RawResponse){"use strict";function applyRenderer(qtiClass,rendererFactory){var moduleUri="taoQtiPrint/qtiPrintRenderer/renderers/"+qtiClass;define(moduleUri,rendererFactory(qtiClass)),defaultConfig.locations[qtiClass]=moduleUri}function defineNotSupported(qtiClass){applyRenderer(qtiClass,NotSupported)}function defineRawResponse(qtiClass){applyRenderer(qtiClass,RawResponse)}return defaultConfig.options.enableDragAndDrop=null,defineNotSupported("mediaInteraction"),defineNotSupported("uploadInteraction"),defineRawResponse("customInteraction"),defaultConfig}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/choices/inlineChoice",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,buffer="";return buffer+="\n    <input type=\"radio\" id=\"response-"+escapeExpression((stack1=(stack1=depth0&&depth0.interaction,null==stack1||!1===stack1?stack1:stack1.serial),"function"===typeof stack1?stack1.apply(depth0):stack1))+"-"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"\n           name=\"response-"+escapeExpression((stack1=(stack1=depth0&&depth0.interaction,null==stack1||!1===stack1?stack1:stack1.serial),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" value=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\">\n    ",buffer}function program3(depth0,data){var stack1,buffer="";return buffer+="\n    <input type=\"checkbox\" id=\"response-"+escapeExpression((stack1=(stack1=depth0&&depth0.interaction,null==stack1||!1===stack1?stack1:stack1.serial),"function"===typeof stack1?stack1.apply(depth0):stack1))+"-"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"\n           name=\"response-"+escapeExpression((stack1=(stack1=depth0&&depth0.interaction,null==stack1||!1===stack1?stack1:stack1.serial),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" value=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\">\n    ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<span class=\"qti-choice qti-inlineChoice\" data-identifier=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"==typeof stack1?stack1.apply(depth0):stack1))+"\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.unique,{hash:{},inverse:self.program(3,program3,data),fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    <label for=\"response-"+escapeExpression((stack1=(stack1=depth0&&depth0.interaction,null==stack1||!1===stack1?stack1:stack1.serial),"function"==typeof stack1?stack1.apply(depth0):stack1))+"-"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"==typeof stack1?stack1.apply(depth0):stack1))+"\">",(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</label>\n</span>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/choices/InlineChoice",["lodash","tpl!taoQtiPrint/qtiPrintRenderer/tpl/choices/inlineChoice","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(_,tpl,getContainer){"use strict";return{qtiClass:"inlineChoice",getContainer:getContainer,template:tpl,getData:function getData(choice,data){return data.body=_.unescape(data.body),data}}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/choices/simpleAssociableChoice.matchInteraction",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+="<th class=\"qti-choice qti-associableChoice qti-simpleAssociableChoice\" data-identifier=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"==typeof stack1?stack1.apply(depth0):stack1))+"\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">",(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</th>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/choices/simpleAssociableChoice.matchInteraction","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use strict";return{qtiClass:"simpleAssociableChoice.matchInteraction",getContainer:getContainer,template:tpl}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/choices/simpleChoice.choiceInteraction",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,buffer="";return buffer+="\n        <input type=\"radio\" id=\"response-"+escapeExpression((stack1=(stack1=depth0&&depth0.interaction,null==stack1||!1===stack1?stack1:stack1.serial),"function"===typeof stack1?stack1.apply(depth0):stack1))+"-"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" name=\"response-"+escapeExpression((stack1=(stack1=depth0&&depth0.interaction,null==stack1||!1===stack1?stack1:stack1.serial),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" value=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\">\n        ",buffer}function program3(depth0,data){var stack1,buffer="";return buffer+="\n        <input type=\"checkbox\" id=\"response-"+escapeExpression((stack1=(stack1=depth0&&depth0.interaction,null==stack1||!1===stack1?stack1:stack1.serial),"function"===typeof stack1?stack1.apply(depth0):stack1))+"-"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" name=\"response-"+escapeExpression((stack1=(stack1=depth0&&depth0.interaction,null==stack1||!1===stack1?stack1:stack1.serial),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" value=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\">\n        ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<li class=\"qti-choice qti-simpleChoice\" data-identifier=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"==typeof stack1?stack1.apply(depth0):stack1))+"\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.unique,{hash:{},inverse:self.program(3,program3,data),fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        <label for=\"response-"+escapeExpression((stack1=(stack1=depth0&&depth0.interaction,null==stack1||!1===stack1?stack1:stack1.serial),"function"==typeof stack1?stack1.apply(depth0):stack1))+"-"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"==typeof stack1?stack1.apply(depth0):stack1))+"\">",(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</label>\n</li>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/choices/SimpleChoice.ChoiceInteraction",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/choices/simpleChoice.choiceInteraction","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use strict";return{qtiClass:"simpleChoice.choiceInteraction",getContainer:getContainer,template:tpl,getData:function(choice,data){return data.unique=1===parseInt(data.interaction.attributes.maxChoices),data}}}),define("taoQtiPrint/qtiPrintRenderer/renderers/config",["taoItems/assets/manager","taoItems/assets/strategies"],function(assetManagerFactory,assetStrategies){"use strict";var assetManager=assetManagerFactory([assetStrategies.taomedia,assetStrategies.external,assetStrategies.base64,assetStrategies.baseUrl],{baseUrl:""});return{name:"printRenderer",locations:{assessmentItem:"taoQtiPrint/qtiPrintRenderer/renderers/Item",_container:"taoQtiPrint/qtiPrintRenderer/renderers/Container",stylesheet:"taoQtiPrint/qtiPrintRenderer/renderers/Stylesheet",figure:"taoQtiPrint/qtiPrintRenderer/renderers/Figure",figcaption:"taoQtiPrint/qtiPrintRenderer/renderers/Figcaption",img:"taoQtiPrint/qtiPrintRenderer/renderers/Img",rubricBlock:"taoQtiPrint/qtiPrintRenderer/renderers/RubricBlock",object:"taoQtiPrint/qtiPrintRenderer/renderers/Object",prompt:"taoQtiPrint/qtiPrintRenderer/renderers/interactions/Prompt",choiceInteraction:"taoQtiPrint/qtiPrintRenderer/renderers/interactions/ChoiceInteraction",matchInteraction:"taoQtiPrint/qtiPrintRenderer/renderers/interactions/MatchInteraction",inlineChoiceInteraction:"taoQtiPrint/qtiPrintRenderer/renderers/interactions/InlineChoiceInteraction",extendedTextInteraction:"taoQtiPrint/qtiPrintRenderer/renderers/interactions/ExtendedTextInteraction",textEntryInteraction:"taoQtiPrint/qtiPrintRenderer/renderers/interactions/TextEntryInteraction","simpleChoice.choiceInteraction":"taoQtiPrint/qtiPrintRenderer/renderers/choices/SimpleChoice.ChoiceInteraction","simpleAssociableChoice.matchInteraction":"taoQtiPrint/qtiPrintRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction",inlineChoice:"taoQtiPrint/qtiPrintRenderer/renderers/choices/InlineChoice",math:"taoQtiPrint/qtiPrintRenderer/renderers/Math",include:"taoQtiPrint/qtiPrintRenderer/renderers/Include",table:"taoQtiPrint/qtiPrintRenderer/renderers/Table",_simpleFeedbackRule:!1,outcomeDeclaration:!1,responseDeclaration:!1,responseProcessing:!1,modalFeedback:!1,orderInteraction:!1,associateInteraction:!1,sliderInteraction:!1,"simpleChoice.orderInteraction":!1,hottext:!1,gap:!1,gapText:!1,"simpleAssociableChoice.associateInteraction":!1,hottextInteraction:!1,hotspotInteraction:!1,hotspotChoice:!1,associableHotspot:!1,gapMatchInteraction:!1,selectPointInteraction:!1,graphicOrderInteraction:!1,mediaInteraction:!1,uploadInteraction:!1,graphicGapMatchInteraction:!1,gapImg:!1,graphicAssociateInteraction:!1,customInteraction:!1,infoControl:!1,endAttemptInteraction:!1},options:{assetManager:assetManager}}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/container",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+="<div class=\"qti-block\">",(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>",buffer}function program3(depth0,data){var stack1,helper,buffer="";return(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,functionType="function",self=this,helperMissing=helpers.helperMissing;return stack1=(helper=helpers.equal||depth0&&depth0.equal,options={hash:{},inverse:self.program(3,program3,data),fn:self.program(1,program1,data),data:data},helper?helper.call(depth0,depth0&&depth0.contentModel,"blockStatic",options):helperMissing.call(depth0,"equal",depth0&&depth0.contentModel,"blockStatic",options)),stack1||0===stack1?stack1:""})}),define("taoQtiPrint/qtiPrintRenderer/renderers/Container",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/container"],function(tpl){"use strict";return{qtiClass:"_container",template:tpl}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/figcaption",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,buffer="";return buffer+=" lang=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["xml:lang"]),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<figcaption",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["xml:lang"]),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">",(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</figcaption>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/Figcaption",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/figcaption"],function(tpl){"use strict";return{qtiClass:"figcaption",template:tpl}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/figure",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,buffer="";return buffer+=" class=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["class"]),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}function program3(depth0,data){var stack1,buffer="";return buffer+=" lang=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["xml:lang"]),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<figure data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["class"]),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["xml:lang"]),{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">",(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</figure>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/Figure",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/figure","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use strict";return{qtiClass:"figure",getContainer:getContainer,template:tpl,render:function(figure){var $figure=getContainer(figure),$img=$figure.find("img");$img.length&&($figure.css({width:$img.attr("width")}),$img.attr("width","100%"))}}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/img",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,buffer="";return buffer+=" id=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.id),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}function program3(depth0,data){var stack1,buffer="";return buffer+=" class=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["class"]),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}function program5(depth0,data){var stack1,buffer="";return buffer+=" height=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.height),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}function program7(depth0,data){var stack1,buffer="";return buffer+=" width=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.width),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<img\n    data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"\n    data-qti-class=\"img\"\n    src=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.src),"function"==typeof stack1?stack1.apply(depth0):stack1))+"\"\n    alt=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.alt),"function"==typeof stack1?stack1.apply(depth0):stack1))+"\"\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["class"]),{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.height),{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.width),{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n/>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/Img",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/img","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use strict";return{qtiClass:"img",template:tpl,getContainer:getContainer}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/include",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+="<div class=\"qti-include\" data-href=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.href),"function"==typeof stack1?stack1.apply(depth0):stack1))+"\">\n    ",(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</div>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/Include",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/include","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use strict";return{qtiClass:"include",template:tpl,getContainer:getContainer}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/choiceInteraction",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}function program3(depth0,data){return" horizontal"}function program5(depth0,data){var stack1;return stack1="function"===typeof depth0?depth0.apply(depth0):depth0,stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;return buffer+="<article class=\"qti-interaction qti-blockInteraction qti-choiceInteraction\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" data-qti-class=\"choiceInteraction\">\n  <span class=\"response-identifier\">"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.responseIdentifier),"function"==typeof stack1?stack1.apply(depth0):stack1))+"</span>\n  ",stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n  <ol class=\"plain block-listing solid choice-area",stack1=helpers["if"].call(depth0,depth0&&depth0.horizontal,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\">\n      ",options={hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data},(helper=helpers.choices)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.choices,stack1="function"===typeof helper?helper.call(depth0,options):helper),helpers.choices||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n  </ol>\n</article>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/interactions/ChoiceInteraction",["lodash","tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/choiceInteraction","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(_,tpl,getContainer){"use strict";return{qtiClass:"choiceInteraction",template:tpl,getContainer:getContainer,getData:function getCustomData(interaction,data){return _.merge(data||{},{horizontal:"horizontal"===interaction.attr("orientation")})}}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/extendedTextInteraction",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}function program3(depth0,data){var stack1,buffer="";return buffer+="\n        ",stack1=helpers.each.call(depth0,depth0&&depth0.maxStringLoop,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        {!-- If there's an expected length or a max length --}}\n        ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.expectedLength),{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.maxLength,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        \n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.maxWords,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",buffer}function program4(depth0,data){var stack1,buffer="";return buffer+="\n            <textarea class=\"text-container text-"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.format),"function"===typeof stack1?stack1.apply(depth0):stack1))+" solid",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["class"]),{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\" name=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"===typeof stack1?stack1.apply(depth0):stack1))+"_"+escapeExpression("function"===typeof depth0?depth0.apply(depth0):depth0)+"\" ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.patternMask),{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="></textarea>\n        ",buffer}function program5(depth0,data){return" attributes.class"}function program7(depth0,data){var stack1,buffer="";return buffer+="pattern=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.patternMask),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}function program9(depth0,data){var stack1,helper,options,buffer="";return buffer+="\n            <div class=\"text-counter\">\n                <span class=\"count-chars\">0</span> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"of",options):helperMissing.call(depth0,"__","of",options)))+" "+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.expectedLength),"function"===typeof stack1?stack1.apply(depth0):stack1))+" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"chars",options):helperMissing.call(depth0,"__","chars",options)))+" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"recommanded",options):helperMissing.call(depth0,"__","recommanded",options)))+".\n            </div>\n        ",buffer}function program11(depth0,data){var stack1,helper,options,buffer="";return buffer+="\n            <div class=\"text-counter\">\n                <span class=\"count-chars\">0</span> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"of",options):helperMissing.call(depth0,"__","of",options)))+" ",(helper=helpers.maxLength)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.maxLength,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"chars",options):helperMissing.call(depth0,"__","chars",options)))+" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"maximum",options):helperMissing.call(depth0,"__","maximum",options)))+".\n            </div>\n        ",buffer}function program13(depth0,data){var stack1,helper,options,buffer="";return buffer+="\n            <div class=\"text-counter\">\n                <span class=\"count-words\">0</span> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"of",options):helperMissing.call(depth0,"__","of",options)))+" ",(helper=helpers.maxWords)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.maxWords,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"words",options):helperMissing.call(depth0,"__","words",options)))+" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"maximum",options):helperMissing.call(depth0,"__","maximum",options)))+".\n            </div>\n        ",buffer}function program15(depth0,data){var stack1,buffer="";return buffer+="\n        <textarea class=\"text-container text-"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.format),"function"===typeof stack1?stack1.apply(depth0):stack1))+" solid",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["class"]),{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\" ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.patternMask),{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="></textarea>\n        \n        ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.expectedLength),{hash:{},inverse:self.noop,fn:self.program(16,program16,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.maxLength,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        \n        ",stack1=helpers["if"].call(depth0,depth0&&depth0.maxWords,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",buffer}function program16(depth0,data){var stack1,helper,options,buffer="";return buffer+="\n            <div class=\"text-counter\">\n                <span class=\"count-chars\">0</span> "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"of",options):helperMissing.call(depth0,"__","of",options)))+" "+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.expectedLength),"function"===typeof stack1?stack1.apply(depth0):stack1))+" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"chars",options):helperMissing.call(depth0,"__","chars",options)))+" "+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"recommended",options):helperMissing.call(depth0,"__","recommended",options)))+".\n            </div>\n        ",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,helperMissing=helpers.helperMissing;return buffer+="<article class=\"qti-interaction qti-blockInteraction qti-extendedTextInteraction\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" data-qti-class=\"extendedTextInteraction\">\n    <span class=\"response-identifier\">"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.responseIdentifier),"function"==typeof stack1?stack1.apply(depth0):stack1))+"</span>\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    <div class=\"instruction-container\"></div>\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.program(15,program15,data),fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</article>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/interactions/ExtendedTextInteraction",["lodash","tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/extendedTextInteraction","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(_,tpl,getContainer){"use strict";var _parsePattern=function(pattern,type){if(pattern===void 0)return null;var result,regexChar=/\^\[\\s\\S\]\{\d+\,(\d+)\}\$/,regexWords=/\^\(\?\:\(\?\:\[\^\\s\\:\\!\\\?\\\;\\\…\\\€\]\+\)\[\\s\\:\\!\\\?\\;\\\…\\\€\]\*\)\{\d+\,(\d+)\}\$/;return"words"===type?(result=pattern.match(regexWords),null!==result&&1<result.length?parseInt(result[1],10):null):"chars"===type?(result=pattern.match(regexChar),null!==result&&1<result.length?parseInt(result[1],10):null):null};return{qtiClass:"extendedTextInteraction",template:tpl,getContainer:getContainer,getData:function getCustomData(interaction,data){var pattern=interaction.attr("patternMask"),maxWords=parseInt(_parsePattern(pattern,"words")),maxLength=parseInt(_parsePattern(pattern,"chars")),expectedLength=parseInt(interaction.attr("expectedLines"),10);return _.merge(data||{},{maxWords:isNaN(maxWords)?void 0:maxWords,maxLength:isNaN(maxLength)?void 0:maxLength,attributes:isNaN(expectedLength)?void 0:{expectedLength:72*expectedLength}})}}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/inlineChoiceInteraction",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1;return stack1="function"===typeof depth0?depth0.apply(depth0):depth0,stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;return buffer+="<span class=\"qti-interaction qti-inlineInteraction qti-inlineChoiceInteraction\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"\n      data-qti-class=\"inlineChoiceInteraction\">\n        ",options={hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data},(helper=helpers.choices)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.choices,stack1="function"===typeof helper?helper.call(depth0,options):helper),helpers.choices||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        <span class=\"response-identifier\">"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.responseIdentifier),"function"==typeof stack1?stack1.apply(depth0):stack1))+"</span>\n</span>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/interactions/InlineChoiceInteraction",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/inlineChoiceInteraction","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use strict";return{qtiClass:"inlineChoiceInteraction",template:tpl,getContainer:getContainer}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/matchInteraction",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,buffer="";return buffer+="id=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.id),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}function program3(depth0,data){var stack1,buffer="";return buffer+=" "+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["class"]),"function"===typeof stack1?stack1.apply(depth0):stack1)),buffer}function program5(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}function program7(depth0,data){var stack1;return stack1="function"===typeof depth0?depth0.apply(depth0):depth0,stack1||0===stack1?stack1:""}function program9(depth0,data,depth1){var stack1,buffer="";return buffer+="\n      <tr>\n        ",stack1="function"===typeof depth0?depth0.apply(depth0):depth0,(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        ",stack1=helpers.each.call(depth0,depth1&&depth1.matchSet1,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n      </tr>\n      ",buffer}function program10(depth0,data){return"\n        <td>\n          <label>\n            <input type=\"checkbox\" >\n            <span class=\"icon-checkbox cross\"></span>\n          </label>\n        </td>\n        "}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;return buffer+="<div ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" class=\"qti-interaction qti-blockInteraction qti-matchInteraction",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["class"]),{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" data-qti-class=\"matchInteraction\">\n  <span class=\"response-identifier\">"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.responseIdentifier),"function"==typeof stack1?stack1.apply(depth0):stack1))+"</span>\n  ",stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n  <div class=\"instruction-container\"></div>\n  <div class=\"match-interaction-area\">\n    <table class=\"matrix\">\n      <thead>\n      <tr>\n        <th> </th>\n        ",options={hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data},(helper=helpers.matchSet1)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.matchSet1,stack1="function"===typeof helper?helper.call(depth0,options):helper),helpers.matchSet1||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n      </tr>\n      </thead>\n      <tbody>\n      ",options={hash:{},inverse:self.noop,fn:self.programWithDepth(9,program9,data,depth0),data:data},(helper=helpers.matchSet2)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.matchSet2,stack1="function"===typeof helper?helper.call(depth0,options):helper),helpers.matchSet2||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.programWithDepth(9,program9,data,depth0),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n      </tbody>\n    </table>\n  </div>\n  <div class=\"notification-container\"></div>\n</div>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/interactions/MatchInteraction",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/matchInteraction","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use strict";return{qtiClass:"matchInteraction",template:tpl,getContainer:getContainer}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/prompt",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+="<div class=\"qti-prompt-container\">\n    <p class=\"qti-prompt\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">",(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</p>\n</div>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/interactions/Prompt",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/prompt","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use stict";return{qtiClass:"prompt",template:tpl,getContainer:getContainer}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/textEntryInteraction",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+="<span class=\"qti-interaction qti-inlineInteraction qti-textEntryInteraction\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" data-qti-class=\"textEntryInteraction\">\n    <input type=\"text\">\n    <span class=\"response-identifier\">"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.responseIdentifier),"function"==typeof stack1?stack1.apply(depth0):stack1))+"</span>\n</span>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/interactions/TextEntryInteraction",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/interactions/textEntryInteraction","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use strict";return{qtiClass:"textEntryInteraction",template:tpl,getContainer:getContainer}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/item",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){return" attributes.id"}function program3(depth0,data){var stack1,buffer="";return buffer+=" "+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["class"]),"function"===typeof stack1?stack1.apply(depth0):stack1)),buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<article class=\"qti-item tao-scope runtime\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" data-identifier=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.identifier),"function"==typeof stack1?stack1.apply(depth0):stack1))+"\">\n    <div",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" class=\"qti-itemBody",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["class"]),{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\">",(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>\n</article>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/Item",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/item","taoQtiPrint/qtiPrintRenderer/helpers/container","taoQtiItem/qtiCommonRenderer/helpers/itemStylesheetHandler"],function(tpl,getContainer,itemStylesheetHandler){"use strict";return{qtiClass:"assessmentItem",template:tpl,getContainer:getContainer,render:function render(item){itemStylesheetHandler.attach(item.stylesheets)}}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/math",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+="\n<span data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" data-qti-class=\"math\">\n    <math display = \"block\">",(helper=helpers.raw)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.raw,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</math>\n</span>\n",buffer}function program3(depth0,data){var stack1,helper,buffer="";return buffer+="\n<span data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" data-qti-class=\"math\">\n    <math>",(helper=helpers.raw)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.raw,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</math>\n</span>\n",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;return stack1=helpers["if"].call(depth0,depth0&&depth0.block,{hash:{},inverse:self.program(3,program3,data),fn:self.program(1,program1,data),data:data}),stack1||0===stack1?stack1:""})}),define("taoQtiPrint/qtiPrintRenderer/renderers/Math",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/math","taoQtiPrint/qtiPrintRenderer/helpers/container","mathJax"],function(tpl,getContainer,MathJax){"use strict";return{qtiClass:"math",template:tpl,getContainer:getContainer,render:function(math,data){"undefined"!=typeof MathJax&&MathJax&&_.delay(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,getContainer(math).parent()[0]])},60)}}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/object",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,buffer="";return buffer+="<video ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" src=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.data),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" type=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.type),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.width),{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.height),{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\" controls=\"controls\" preload=\"none\"></video>",buffer}function program2(depth0,data){var stack1,buffer="";return buffer+="id=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.id),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}function program4(depth0,data){var stack1,buffer="";return buffer+="width=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.width),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}function program6(depth0,data){var stack1,buffer="";return buffer+="height=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.height),"function"===typeof stack1?stack1.apply(depth0):stack1)),buffer}function program8(depth0,data){var stack1,buffer="";return buffer+="<audio ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" src=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.data),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" type=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.type),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"></audio>",buffer}function program10(depth0,data){var stack1,buffer="";return buffer+="<object ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" data=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.data),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" type=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.type),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.width),{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.height),{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.alt),"function"===typeof stack1?stack1.apply(depth0):stack1))+"</object>",buffer}function program11(depth0,data){var stack1,buffer="";return buffer+="height=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.height),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}function program13(depth0,data){var stack1,buffer="";return buffer+="<iframe ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" src=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.data),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.width),{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.height),{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">"+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.alt),"function"===typeof stack1?stack1.apply(depth0):stack1))+"</iframe>",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<div class=\"qti-object-container\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" >\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.video,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.audio,{hash:{},inverse:self.noop,fn:self.program(8,program8,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.object,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.html,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</div>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/Object",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/object","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use strict";return{qtiClass:"object",template:tpl,getContainer:getContainer}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/rubricBlock",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+="\n<div class=\"grid-row qti-rubricBlock\" data-use=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.use),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\" data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" data-qti-class=\"rubricBlock\">\n    <div class=\"col-12\">\n        <div class=\"qti-rubricBlock-body\">",(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>\n    </div>\n</div>\n",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;return stack1=helpers.unless.call(depth0,depth0&&depth0.empty,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),stack1||0===stack1?stack1:""})}),define("taoQtiPrint/qtiPrintRenderer/renderers/RubricBlock",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/rubricBlock","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use strict";return{qtiClass:"rubricBlock",getContainer:getContainer,template:tpl,getData:function getData(rubric,data){return rubric.isEmpty()&&(data.empty=!0),data}}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/stylesheet",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,buffer="";return buffer+=" media=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.media),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<link\n    href=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.href),"function"==typeof stack1?stack1.apply(depth0):stack1))+"\"\n    type=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.type),"function"==typeof stack1?stack1.apply(depth0):stack1))+"\"\n    rel=\"stylesheet\"\n    data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.media),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n/>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/Stylesheet",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/stylesheet","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use strict";return{qtiClass:"stylesheet",template:tpl,getContainer:getContainer}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/table",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,buffer="";return buffer+=" "+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["class"]),"function"===typeof stack1?stack1.apply(depth0):stack1)),buffer}function program3(depth0,data){var stack1,buffer="";return buffer+="summary=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.summary),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}function program5(depth0,data){var stack1,buffer="";return buffer+=" lang=\""+escapeExpression((stack1=(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["xml:lang"]),"function"===typeof stack1?stack1.apply(depth0):stack1))+"\"",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<table\n    class=\"qti-table",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["class"]),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\"\n    data-qti-class=\"table\"\n    data-serial=\"",(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1.summary),{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||!1===stack1?stack1:stack1["xml:lang"]),{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    >\n    ",(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</table>",buffer})}),define("taoQtiPrint/qtiPrintRenderer/renderers/Table",["tpl!taoQtiPrint/qtiPrintRenderer/tpl/table","taoQtiPrint/qtiPrintRenderer/helpers/container"],function(tpl,getContainer){"use strict";return{qtiClass:"table",getContainer:getContainer,template:tpl}}),define("tpl!taoQtiPrint/qtiPrintRenderer/tpl/notYetSupported",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+="\n    <div class=\"additional\">\n        <div class=\"title\">Additional information:</div>\n        <p class=\"info\">",(helper=helpers.additional)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.additional,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</p>\n    </div>\n",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",self=this;return buffer+="<article class=\"render-error feedback-error\">\n    <span class=\"icon-error\"></span>\n    <p class=\"message\">",(helper=helpers.message)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.message,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</p>\n",stack1=helpers["if"].call(depth0,depth0&&depth0.additional,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</article>",buffer})}),define("taoQtiPrint/runner/provider/qtiprint",["lodash","i18n","context","core/logger","core/promise","taoQtiItem/qtiItem/core/Loader","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiRunner/core/Renderer","taoQtiItem/runner/provider/manager/picManager","taoQtiItem/runner/provider/manager/userModules","tpl!taoQtiPrint/qtiPrintRenderer/tpl/notYetSupported"],function(_,__,context,loggerFactory,Promise,QtiLoader,Element,Renderer,picManager,userModules,notYetSupportedTpl){"use strict";function getQtiRenderer(rendererType){return QtiRendererPromise||(QtiRendererPromise=new Promise(function(resolve){require(rendererModules[rendererType],function(config){resolve(Renderer.build(config.locations,config.name,config.options))})}).catch(function(err){logger.error(err)})),QtiRendererPromise}function missingSupport(item,additional){var label=item.identifier;return item.attributes&&item.attributes.label&&(label=item.attributes.label),notYetSupportedTpl({message:__("The item &laquo;%s&raquo; contains an interaction that is not yet supported for printing purpose",label),additional:additional})}var timeout=1e3*(0<context.timeout?context.timeout+1:30),logger=loggerFactory("runner/provider/qtiPrint"),rendererModules={results:["taoQtiPrint/qtiCommonRenderer/renderers/config","css!taoQtiPrintCss/themes/items/default/theme.css"],booklet:["taoQtiPrint/qtiPrintRenderer/renderers/config","css!taoQtiPrintCss/qti.css"],bubbleSheet:["taoQtiPrint/qtiPrintRenderer/renderers/config","css!taoQtiPrintCss/themes/items/bubble-sheet/theme.css"]},QtiRendererPromise=null;return{init:function init(itemData,done){var self=this;getQtiRenderer(self.options.renderer).then(function(QtiRenderer){var rendererOptions={assetManager:self.assetManager};self.options.themes&&(rendererOptions.themes=self.options.themes),self._loader=new QtiLoader,self._renderer=new QtiRenderer(rendererOptions),self._loader.loadItemData(itemData,function(item){if(!item)return self.trigger("error","Unable to load item from the given data.");self._itemData=itemData,self._item=item;try{self._renderer.load(function(){self._item.setRenderer(this),done()},this.getLoadedClasses())}catch(e){self.trigger("error","Unable to render the item : "+e)}})})},render:function render(elt,done){var self=this;if(this._item){try{this.options.showResponseIdentifier&&this._item.addClass("show-response-identifier"),elt.innerHTML=this._item.render({})}catch(e){logger.trace(e),elt.innerHTML=missingSupport(this._itemData,e),self.trigger("warning","Error in template rendering : "+e)}try{Promise.race([Promise.all(this._item.postRender()),new Promise(function(resolve,reject){_.delay(reject,timeout,new Error("Post rendering ran out of time in item "+self._itemData.serial))})]).then(function(){return self.trigger("listpic",picManager.collection(self._item)),userModules.load().then(done)}).catch(function(err){self.trigger("error","Error in post rendering : "+err instanceof Error?err.message:err),done()})}catch(e){self.trigger("error","Error in post rendering : "+e),done()}}else done()},clear:function clear(elt,done){done()},getState:function getState(){return{}},setState:function setState(state){this._item&&state&&(_.forEach(this._item.getInteractions(),function(interaction){var id=interaction.attr("responseIdentifier");id&&state[id]&&interaction.setState(state[id])}),state.pic&&_.forEach(this._item.getElements(),function(element){Element.isA(element,"infoControl")&&state.pic[element.attr("id")]&&element.setState(state.pic[element.attr("id")])}))},getResponses:function getResponses(){return[]}}}),define("taoQtiPrint/runner/itemRunner",["taoItems/runner/api/itemRunner","taoQtiPrint/runner/provider/qtiprint"],function(itemRunner,qtiRuntimeProvider){"use strict";return itemRunner.register("qtiprint",qtiRuntimeProvider),itemRunner}),define("tpl!taoQtiPrint/runner/tpl/pageTest",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+="<h3>",(helper=helpers.uniqid)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.uniqid,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h3>",buffer}function program3(depth0,data){var stack1,helper,options,buffer="";return buffer+="<div class=\"logo\">\n        <img src=\"",(helper=helpers.logo)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.logo,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\" alt=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Logo",options):helperMissing.call(depth0,"__","Logo",options)))+"\" />\n    </div>",buffer}function program5(depth0,data){var stack1,helper,buffer="";return buffer+="<h1>",(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h1>",buffer}function program7(depth0,data){var stack1,helper,buffer="";return buffer+="<h2>",(helper=helpers.subtitle)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.subtitle,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h2>",buffer}function program9(depth0,data){var stack1,helper,buffer="";return buffer+="<h3>",(helper=helpers.date)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.date,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h3>",buffer}function program11(depth0,data){return"<div class=\"qr-code\"></div>"}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing,self=this;return stack1=helpers["if"].call(depth0,depth0&&depth0.uniqid,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.logo,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.title,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.subtitle,{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.date,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),stack1=helpers["if"].call(depth0,depth0&&depth0.qrcode,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer})}),define("tpl!taoQtiPrint/runner/tpl/pageSection",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,buffer="";return buffer+="\n<div>",stack1="function"===typeof depth0?depth0.apply(depth0):depth0,(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>\n",buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+="<h2>",(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</h2>\n",stack1=helpers.each.call(depth0,depth0&&depth0.rubricBlock,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer})}),define("tpl!taoQtiPrint/runner/tpl/pageBlock",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+="<section class=\"grid-row ",(helper=helpers.type)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.type,stack1="function"===typeof helper?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"></section>",buffer})}),define("taoQtiPrint/runner/testRenderers",["jquery","lodash","util/url","taoQtiPrint/runner/itemRunner","taoItems/assets/strategies","taoQtiPrint/lib/qrcode","tpl!taoQtiPrint/runner/tpl/pageTest","tpl!taoQtiPrint/runner/tpl/pageSection","tpl!taoQtiPrint/runner/tpl/pageBlock"],function($,_,urlHelper,itemRunner,assetStrategies,QRCode,pageTestTpl,pageSectionTpl){"use strict";return{testPage:function testPage($container,test,options,done){var coverPageOptions=options&&options.cover_page||{};$(pageTestTpl({title:coverPageOptions.title&&test.title,subtitle:coverPageOptions.description&&options.description,qrcode:coverPageOptions.qr_code,logo:coverPageOptions.logo&&options.logo,date:coverPageOptions.date&&options.date,uniqid:coverPageOptions.unique_id&&options.unique_id})).appendTo($container),coverPageOptions.qr_code&&new QRCode($(".qr-code",$container).get(0),{text:coverPageOptions.qr_code_data||urlHelper.route("render","PrintTest","taoBooklet",{uri:options.uri}).padEnd(220),width:192,height:192,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),done()},sectionPage:function sectionPage($container,section,done){$(pageSectionTpl({title:section.title,rubricBlock:section.rubricBlock})).appendTo($container),done()},itemPage:function itemPage($container,itemRef,itemState,uri,done){function itemDone(err){isDone||(isDone=!0,done(err))}var item=itemRef.data,assets=itemRef.assets,baseUrl=itemRef.baseUrl||urlHelper.route("getFile","QtiCreator","taoQtiItem",{uri:uri,lang:"en-US"})+"&relPath=",isDone=!1;itemRunner("qtiprint",item,{renderer:itemRef.renderer,showResponseIdentifier:itemRef.showResponseIdentifier}).on("error",function(err){itemDone(err)}).on("init",function(){itemState&&_.isPlainObject(itemState)&&this.setState(itemState),this.render($container)}).on("ready",function(){itemDone()}).assets([{name:"base64package",handle:function handleBase64(url){var id=url.file,found=_.find(assets,function(assetsList){var asset=assetsList[id];return!!(asset&&urlHelper.isBase64(asset))});if(found)return found[id]}},assetStrategies.taomedia,assetStrategies.external,assetStrategies.baseUrl],{baseUrl:baseUrl}).init()}}}),define("taoQtiPrint/runner/testRunner",["jquery","lodash","async","core/eventifier","taoQtiPrint/runner/testRenderers","tpl!taoQtiPrint/runner/tpl/pageBlock"],function($,_,asyncLib,eventifier,testRenderers,pageBlockTpl){"use strict";var testRunnerFactory=function testRunnerFactory(testDefinitions,options){function createPage(type){var $pageBlock=$(pageBlockTpl({type:type}));return $container.append($pageBlock),$pageBlock}var $container,layoutOptions=options&&options.layout||{};if(!testDefinitions)throw new Error("Invalid test data structure");return _.isArray(testDefinitions)||(testDefinitions=[testDefinitions]),_.forEach(testDefinitions,function(testDefinition){if(!testDefinition)throw new Error("Invalid test data structure: definition is empty");if(!testDefinition.data)throw new Error("Invalid test data structure: data is missing");if(!testDefinition.items)throw new Error("Invalid test data structure: items is missing")}),eventifier({render:function render(elt){var self=this,pageRenderers=[];return elt instanceof HTMLElement||elt instanceof $?($container=elt instanceof $?elt:$(elt),$container.empty(),options&&!0===options.rtl&&$container.addClass("rtl").attr("dir","rtl"),_.forEach(testDefinitions,function(testDefinition){var testData=testDefinition.data||{},items=testDefinition.items||{},states=testDefinition.states||{};layoutOptions.cover_page&&pageRenderers.push(_.partial(testRenderers.testPage,createPage("title"),testData,options)),_.forEach(testData.testParts,function(testPart){_.forEach(testPart.sections,function(section){pageRenderers.push(_.partial(testRenderers.sectionPage,createPage("section"),section)),_.forEach(section.items,function(item){var itemRef=items[item.href],itemState=states[item.href];itemRef&&itemRef.data&&(itemRef.renderer="booklet",options.regular?itemRef.renderer="results":options.layout&&options.layout.use_bubble_sheet&&(itemRef.renderer="bubbleSheet"),options&&options.layout&&options.layout.show_response_identifier&&(itemRef.showResponseIdentifier=!0),pageRenderers.push(_.partial(testRenderers.itemPage,createPage("item"),itemRef,itemState,item.href)))})})})}),asyncLib.parallel(pageRenderers,function renderingDone(err){err&&self.trigger("error","An error occurred while rendering a page :  "+err),self.trigger("render"),self.trigger("ready")}),this):self.trigger("error","A valid HTMLElement (or a jquery element) at least is required to render the test")},clear:function clear(){return $container.empty(),this.trigger("clear"),this}})};return testRunnerFactory}),define("taoQtiPrint/loader/taoQtiPrint.bundle",function(){}),define("taoQtiPrint/loader/taoQtiPrint.min",["taoItems/loader/taoItems.min","taoQtiItem/loader/taoQtiItem.min"],function(){});
//# sourceMappingURL=taoQtiPrint.min.js.map